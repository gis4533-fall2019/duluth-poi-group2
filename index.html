<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"/>
    <style> body {
    padding: 0;
    margin: 0;
        }
    html, body, #map {
    height: 100%;
        width: 100%;
        }
    </style>
    
    <!-- External Stylesheets -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />
</head>
<body>
    <!-- Our web map and content will go here -->
    <div id="map"></div>
    <!-- Add the Leaflet JavaScript library -->
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
    <!-- Add Omnivore Plugin -->
    <!-- Source for Omnivore plugin: https://github.com/mapbox/leaflet-omnivore-->
        <script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
    
    <script>
    // Create variable to hold map element, give initial settings to map
    var map = L.map('map',{ center: [46.7837535, -92.0952804], zoom: 14});
        
    // Update basemap **borrowered from WebDev3 lesson**
    L.tileLayer('https://dev.{s}.tile.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png', {
	maxZoom: 20,
	attribution: '<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

     //Create an Empty Popup
        var popup = L.popup();
    //Function of Popup
        function onMapClick(e) {
            popup
            .setLatLng(e.latlng)
            .setContent( "You clicked map at " + e.latlng.toString ())
            .openOn(map);
        }
        
        //Listen for Click Event on the map element
        map.on('click', onMapClick);
        
//***** Following code taken from webdev2 assignment*****
// Create custom airplane marker for airports.csv
       var myAirplane = L.icon({
            iconUrl:'https://raw.githubusercontent.com/gis4533-fall2019/webdev-unit/master/airport.png',
            iconSize:  [40, 40], // size of the icon
        }) 

// Create custom layer as template for airports layer
// Code adapted from https://kristofj-umd.github.io/webdev-f19/assignments/webdev2.html
       var customLayer = L.geoJson(null, {pointToLayer: function(feature,latlng){return L.marker(latlng,{icon: myAirplane});}});
        
// Create airports feature from airports csv
        var myAirportsCsv = omnivore.csv('POI_data/Duluth_POI.csv', null, customLayer).addTo(map);

    </script>
    
</body>
</html>